<% month_name = Date::MONTHNAMES[@month] %>
<div class="rounded-xl ring-1 ring-emerald-200 bg-white p-6">
  <div class="flex items-center justify-between">
    <div class="flex items-center gap-3">
      <a href="/" class="px-3 py-2 rounded-lg bg-emerald-100 text-emerald-700"><%= t("stats.back_home") %></a>
      <div class="text-lg font-semibold text-emerald-700"><%= t("stats.month_year", year: @year, month: @month) %></div>
    </div>
    <div class="flex gap-2">
      <% prev = Date.new(@year, @month, 1).prev_month %>
      <% nxt = Date.new(@year, @month, 1).next_month %>
      <a href="/calendar?year=<%= prev.year %>&month=<%= prev.month %>" class="px-3 py-2 rounded-lg bg-emerald-100 text-emerald-700"><%= t("stats.prev") %></a>
      <a href="/calendar?year=<%= nxt.year %>&month=<%= nxt.month %>" class="px-3 py-2 rounded-lg bg-emerald-100 text-emerald-700"><%= t("stats.next") %></a>
    </div>
  </div>
  <div class="mt-4 grid grid-cols-7 gap-2 text-sm text-slate-500">
    <% t("stats.weekdays_short").each do |wd| %>
      <div><%= wd %></div>
    <% end %>
  </div>
  <% start = Date.new(@year, @month, 1) %>
  <% first_wday = (start.cwday) %>
  <div class="mt-2 grid grid-cols-7 gap-2">
    <% (first_wday - 1).times do %>
      <div class="h-20 rounded-lg bg-slate-50"></div>
    <% end %>
    <% (start..start.end_of_month).each do |d| %>
      <% c = @counts[d] || 0 %>
      <div class="h-20 rounded-lg ring-1 ring-emerald-100 bg-emerald-50 p-2 flex flex-col">
        <div class="text-xs text-slate-500"><%= d.day %></div>
        <div class="mt-1 text-sm text-emerald-700 font-semibold"><%= c %></div>
        <div class="mt-auto flex gap-1 flex-wrap">
          <% [c, 5].min.times do %>
            <span>üçÖ</span>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>